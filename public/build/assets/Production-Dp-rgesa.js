import{a as N,_ as U}from"./AppGameLayout.vue_vue_type_script_setup_true_lang-BtAdMRFl.js";import{_ as b,a as h,b as $}from"./TooltipTrigger.vue_vue_type_script_setup_true_lang-BRFKKinV.js";import{u as w,C as A,_ as k,t as C}from"./game-BPTbYE8l.js";import{d as j,p as D,c,o as n,n as T,a as o,b as l,e as f,u as e,t as d,w as a,i as y,f as G,m as q,F as P,j as E,g as V,W as S}from"./app-jQiBKFQ1.js";import{c as O,f as z,_ as I}from"./index-CpqKsMT_.js";import"./useForwardExpose-BMaz3-BM.js";import"./useForwardPropsEmits-DuV_vQmZ.js";import"./nullish-CHIgUVhi.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BULdTssn.js";import"./getActiveElement-FUKBWQwh.js";import"./beliven-game-symbol-2k0qL996.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=O("CirclePlusIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=O("EqualIcon",[["line",{x1:"5",x2:"19",y1:"9",y2:"9",key:"1nwqeh"}],["line",{x1:"5",x2:"19",y1:"15",y2:"15",key:"g8yjpy"}]]),F={class:"relative p-3"},W={class:"relative grid p-1"},Z={class:"relative p-1 text-center"},X={key:0},H=j({__name:"DeveloperProductionTpl",props:{item:{},active:{type:Boolean}},setup(g){const s=g,u=D(()=>parseInt(s.item.xp/100)),p=w();return(x,t)=>(n(),c("div",{class:T(["hover:bg-accent grid auto-rows-min items-center gap-4 border-b md:grid-cols-3",{"bg-primary/40":s.active,"cursor-not-allowed":s.item.active_project,"cursor-pointer":!s.item.active_project}])},[o("div",F,[l(e(A),{class:"mr-2 inline-block w-4 h-4"}),f(" "+d(s.item.name),1)]),o("div",W,[l(e(k),null,{default:a(()=>[l(e(b),null,{default:a(()=>[l(e(h),{"as-child":""},{default:a(()=>[l(N,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=m=>u.value=m)},null,8,["modelValue"])]),_:1}),l(e($),null,{default:a(()=>[o("p",null,"XP: "+d(s.item.xp),1)]),_:1})]),_:1})]),_:1})]),o("div",Z,[s.item.active_project&&!e(p).gameEnd?(n(),c("span",X,"al lavoro...")):y("",!0)])],2))}}),J={class:"p-3"},K={class:"truncate"},Q={class:"p-3"},Y={key:0},ee=j({__name:"Project",props:{item:{},active:{type:Boolean}},setup(g){const s=g,u=w(),p=D(()=>parseInt(s.item.development_progress/s.item.complexity*100));return(x,t)=>(n(),c("div",{class:T(["grid auto-rows-min gap-4 md:grid-cols-4 border-b items-center hover:bg-accent",{"bg-primary/40":s.active,"cursor-not-allowed":s.item.development_progress>0,"cursor-pointer":s.item.development_progress==0}])},[o("div",J,[l(e(k),null,{default:a(()=>[l(e(b),null,{default:a(()=>[l(e(h),{"as-child":""},{default:a(()=>[o("div",K,d(s.item.name),1)]),_:1}),l(e($),null,{default:a(()=>[o("p",null,d(s.item.name),1)]),_:1})]),_:1})]),_:1})]),o("div",Q,d(e(z)(s.item.budget)),1),o("div",null,[l(e(k),null,{default:a(()=>[l(e(b),null,{default:a(()=>[l(e(h),{"as-child":""},{default:a(()=>[l(N,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=m=>p.value=m)},null,8,["modelValue"])]),_:1}),l(e($),null,{default:a(()=>[o("p",null,"Progresso: "+d(parseInt(s.item.development_progress))+" / "+d(s.item.complexity),1)]),_:1})]),_:1})]),_:1})]),o("div",null,[s.item.development_progress&&!e(u).gameEnd?(n(),c("span",Y,"in corso...")):y("",!0)])],2))}}),te={class:"flex flex-col"},oe={key:0,class:"h-25 items-center justify-between border-b p-4"},se={class:"w-full text-center"},le={class:""},ie={class:"mx-3"},ae={class:""},re={class:"mx-3"},ne={class:""},ce={class:"grid w-full grid-cols-2",style:{height:"calc(100vh - 225px)"}},de={class:"scrollbar flex h-full w-full flex-col overflow-hidden overflow-y-auto rounded-xl p-4"},ue={class:"scrollbar flex h-full w-full flex-col overflow-hidden overflow-y-auto rounded-xl p-4"},pe={key:0,class:"self-center justify-self-center text-center"},ke=j({__name:"Production",setup(g){const s=G(),u=s.props.game,p=s.props.init_game,x=s.props.developers,t=w();p&&t.setStartData(u),t.initGame();const m=D(()=>t.activeProjects.filter(v=>v.generation_completed==!0&&v.development_completed!==!0));function B(){S.visit("/api/game/project/assign",{method:"post",data:{project_id:t.activeProject.id,developer_id:t.activeDeveloper.id,date:t.dateCurrent},onSuccess:v=>{t.assignDeveloperToProject(t.activeProject,t.activeDeveloper),C.success("sail up -d....si inizia a programmare!"),t.activeProject=null,t.activeDeveloper=null},onError:v=>{C.error(v.error)}})}return(v,i)=>(n(),c(P,null,[l(e(q),{title:"Production"}),l(U,null,{default:a(()=>[o("div",te,[e(t).gameEnd?y("",!0):(n(),c("div",oe,[i[3]||(i[3]=o("p",{class:"text-muted-foreground mb-2 text-center"},"Associa uno sviluppatore a un progetto cliccando su di essi.",-1)),o("div",se,[o("span",le,d(e(t).activeDeveloper?`${e(t).activeDeveloper.name}`:"SELEZIONA UNO SVILUPPATORE"),1),o("span",ie,[l(e(M),{class:"text-primary inline h-5 w-5"})]),o("span",ae,d(e(t).activeProject?`${e(t).activeProject.name}`:"SELEZIONA UN PROGETTO"),1),o("span",re,[l(e(R),{class:"text-primary inline h-5 w-5"})]),o("span",ne,[l(I,{disabled:!e(t).activeDeveloper||!e(t).activeProject,onClick:i[0]||(i[0]=r=>B())},{default:a(()=>i[2]||(i[2]=[f("SVILUPPA PROGETTO")])),_:1},8,["disabled"])])])])),o("div",ce,[o("div",de,[(n(!0),c(P,null,E(e(x),r=>{var _;return n(),V(H,{key:r.id,item:r,active:((_=e(t).activeDeveloper)==null?void 0:_.id)===r.id,onClick:L=>e(t).activeDeveloper==null?e(t).activeDeveloper=r:e(t).activeDeveloper=null},null,8,["item","active","onClick"])}),128))]),o("div",ue,[(n(!0),c(P,null,E(m.value,r=>{var _;return n(),V(ee,{key:r.id,item:r,active:((_=e(t).activeProject)==null?void 0:_.id)===r.id,onClick:L=>e(t).activeProject==null?e(t).activeProject=r:e(t).activeProject=null},null,8,["item","active","onClick"])}),128)),m.value.length===0&&!e(t).gameEnd?(n(),c("div",pe,[i[5]||(i[5]=f(" Non ci sono progetti da sviluppare e i tuoi Developers si stanno annioiando...")),i[6]||(i[6]=o("br",null,null,-1)),i[7]||(i[7]=f(" Completa un nuovo progetto per iniziare lo sviluppo!")),i[8]||(i[8]=o("br",null,null,-1)),l(I,{class:"btn btn-primary mt-5",onClick:i[1]||(i[1]=r=>e(S).get("/game/sales"))},{default:a(()=>i[4]||(i[4]=[f(" Vedi le riunioni in corso ")])),_:1})])):y("",!0)])])])]),_:1})],64))}});export{ke as default};
