import{a as V,_ as P}from"./AppGameLayout.vue_vue_type_script_setup_true_lang-BtAdMRFl.js";import{_ as v,a as g,b as h}from"./TooltipTrigger.vue_vue_type_script_setup_true_lang-BRFKKinV.js";import{u as $,_ as x,H as C,t as E}from"./game-BPTbYE8l.js";import{f as N,_ as B}from"./index-CpqKsMT_.js";import{d as y,p as j,c as m,o as i,a as e,b as o,u as t,w as a,t as c,i as b,e as k,g as w,W as I,f as F,m as G,F as f,j as S}from"./app-jQiBKFQ1.js";import"./useForwardExpose-BMaz3-BM.js";import"./useForwardPropsEmits-DuV_vQmZ.js";import"./nullish-CHIgUVhi.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BULdTssn.js";import"./getActiveElement-FUKBWQwh.js";import"./beliven-game-symbol-2k0qL996.js";const H={class:"grid auto-rows-min items-center gap-4 p-1 md:grid-cols-4"},T={class:"relative p-3"},U={class:"truncate"},W={class:"relative p-3"},D={key:0},L=y({__name:"Project",props:{item:{}},setup(p){const l=p,u=$(),r=j(()=>parseInt(l.item.generation_progress/1e4*100));return(_,n)=>(i(),m("div",H,[e("div",T,[o(t(x),null,{default:a(()=>[o(t(v),null,{default:a(()=>[o(t(g),{"as-child":""},{default:a(()=>[e("div",U,c(l.item.name),1)]),_:1}),o(t(h),null,{default:a(()=>[e("p",null,c(l.item.name),1)]),_:1})]),_:1})]),_:1})]),e("div",W,c(t(N)(l.item.budget)),1),e("div",null,[o(t(x),null,{default:a(()=>[o(t(v),null,{default:a(()=>[o(t(g),{"as-child":""},{default:a(()=>[o(V,{modelValue:r.value,"onUpdate:modelValue":n[0]||(n[0]=s=>r.value=s)},null,8,["modelValue"])]),_:1}),o(t(h),null,{default:a(()=>[e("p",null,"Progresso: "+c(parseInt(l.item.generation_progress))+" / 10000",1)]),_:1})]),_:1})]),_:1})]),e("div",null,[l.item.generation_progress>0&&!t(u).gameEnd?(i(),m("span",D,"in corso...")):b("",!0)])]))}}),M={class:"hover:bg-accent grid auto-rows-min items-center gap-4 border-b p-2 md:grid-cols-3"},X={class:"relative p-3"},q={class:"relative grid"},z={class:"relative p-1 text-right"},A={key:1},J=y({__name:"SellerSaleTpl",props:{item:{}},setup(p){const l=p,u=j(()=>parseInt(l.item.xp/100)),r=$();function _(n){I.visit("/api/game/project/create",{method:"post",data:{seller_id:n.id,date:r.dateCurrent},onSuccess:s=>{E.success("Nuovo cliente in vista! Il tuo commerciale sta lavorando per portare a casa un bel contratto firmato."),r.addProjects(s.props.projects)},onError:s=>{}})}return(n,s)=>(i(),m("div",M,[e("div",X,[o(t(C),{class:"mr-2 inline-block w-4 h-4"}),k(" "+c(l.item.name),1)]),e("div",q,[o(t(x),null,{default:a(()=>[o(t(v),null,{default:a(()=>[o(t(g),{"as-child":""},{default:a(()=>[o(V,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=d=>u.value=d)},null,8,["modelValue"])]),_:1}),o(t(h),null,{default:a(()=>[e("p",null,"XP: "+c(l.item.xp),1)]),_:1})]),_:1})]),_:1})]),e("div",z,[!l.item.active_project&&!t(r).gameEnd?(i(),w(t(B),{key:0,onClick:s[1]||(s[1]=d=>_(l.item))},{default:a(()=>s[2]||(s[2]=[k("Crea nuovo progetto")])),_:1})):b("",!0),l.item.active_project&&!t(r).gameEnd?(i(),m("span",A,"in riunione...")):b("",!0)])]))}}),K={class:"flex flex-col",style:{height:"calc(100vh - 125px)"}},O={class:"flex grid flex-grow grid-cols-2"},Q={class:"flex flex-col",style:{height:"calc(100vh - 220px)"}},R={class:"bg-primary/40"},Y={class:"grid auto-rows-min gap-4"},Z={class:"flex h-10 items-center justify-between p-4"},ee={class:"text-muted-foreground"},te={class:"flex w-full flex-grow overflow-hidden"},se={class:"scrollbar flex h-full w-full flex-col overflow-hidden overflow-y-auto rounded-xl p-4"},oe={class:"border-sidebar-border/70 dark:border-sidebar-border border-l"},le={class:"flex flex-col",style:{height:"calc(100vh - 220px)"}},ae={class:"bg-primary/40"},re={class:"grid auto-rows-min gap-4"},ie={class:"flex h-10 items-center justify-between p-4"},ne={class:"text-muted-foreground"},de={class:"flex w-full flex-grow overflow-hidden"},ce={class:"scrollbar flex h-full w-full flex-col overflow-hidden overflow-y-auto rounded-xl p-4"},$e=y({__name:"Sales",setup(p){const u=F().props.sellers,r=$();r.initGame();const _=j(()=>r.activeProjects.filter(n=>n.generation_completed!==!0));return(n,s)=>(i(),m(f,null,[o(t(G),{title:"Sales"}),o(P,null,{default:a(()=>[e("div",K,[s[2]||(s[2]=e("div",{class:"p-4"},[e("div",{class:"grid auto-rows-min md:grid-cols-2"},[e("div",null,[e("h1",{class:"text-xl font-semibold"},"Progetti"),e("p",{class:"text-muted-foreground"},"Crea appuntamenti per i tuoi venditori e porta a casa nuovi contratti!")]),e("div",{class:"flex items-center justify-end"})])],-1)),e("div",O,[e("div",null,[e("div",Q,[e("div",R,[e("div",Y,[e("div",Z,[s[0]||(s[0]=e("h2",{class:"text-lg font-semibold"},"Commerciali",-1)),e("p",ee,c(t(u).length)+" nel tuo team",1)])])]),e("div",te,[e("div",se,[(i(!0),m(f,null,S(t(u),d=>(i(),w(J,{key:d.id,item:d},null,8,["item"]))),128))])])])]),e("div",oe,[e("div",le,[e("div",ae,[e("div",re,[e("div",ie,[s[1]||(s[1]=e("h2",{class:"text-lg font-semibold"},"Progetti in corso",-1)),e("p",ne,c(_.value.length),1)])])]),e("div",de,[e("div",ce,[(i(!0),m(f,null,S(_.value,d=>(i(),w(L,{key:d.id,item:d},null,8,["item"]))),128))])])])])])])]),_:1})],64))}});export{$e as default};
