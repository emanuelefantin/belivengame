import{a as N,_ as U}from"./AppGameLayout.vue_vue_type_script_setup_true_lang-BTzRhymq.js";import{_ as h,a as b,b as k}from"./TooltipTrigger.vue_vue_type_script_setup_true_lang-D-r2S7vO.js";import{u as w,a as z,_ as $,t as E}from"./game-D4ndYeFs.js";import{d as j,c as D,a as c,o as n,n as T,b as o,e as l,f,u as e,t as d,w as i,j as y,g as A,m as G,F as P,k as C,h as V,W as S}from"./app-CC7vG1Dz.js";import{c as O,f as q,_ as I}from"./index-C3IH88Eb.js";import"./useForwardExpose-YFY4LSNP.js";import"./useForwardPropsEmits-5P1lw3WE.js";import"./nullish-CHIgUVhi.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DCDMkuKB.js";import"./getActiveElement-FUKBWQwh.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=O("CirclePlusIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=O("EqualIcon",[["line",{x1:"5",x2:"19",y1:"9",y2:"9",key:"1nwqeh"}],["line",{x1:"5",x2:"19",y1:"15",y2:"15",key:"g8yjpy"}]]),F={class:"relative p-3"},W={class:"relative grid p-1"},Z={class:"relative p-1 text-center"},X={key:0},H=j({__name:"DeveloperProductionTpl",props:{item:{},active:{type:Boolean}},setup(g){const s=g,u=D(()=>parseInt(s.item.xp/100)),p=w();return(x,t)=>(n(),c("div",{class:T(["hover:bg-accent grid auto-rows-min items-center gap-4 border-b md:grid-cols-3",{"bg-primary/40":s.active,"cursor-not-allowed":s.item.active_project,"cursor-pointer":!s.item.active_project}])},[o("div",F,[l(e(z),{class:"mr-2 inline-block w-4 h-4"}),f(" "+d(s.item.name),1)]),o("div",W,[l(e($),null,{default:i(()=>[l(e(h),null,{default:i(()=>[l(e(b),{"as-child":""},{default:i(()=>[l(N,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=m=>u.value=m)},null,8,["modelValue"])]),_:1}),l(e(k),null,{default:i(()=>[o("p",null,"XP: "+d(s.item.xp),1)]),_:1})]),_:1})]),_:1})]),o("div",Z,[s.item.active_project&&!e(p).gameEnd?(n(),c("span",X,"al lavoro...")):y("",!0)])],2))}}),J={class:"p-3"},K={class:"truncate"},Q={class:"p-3"},Y={key:0},ee=j({__name:"Project",props:{item:{},active:{type:Boolean}},setup(g){const s=g,u=w(),p=D(()=>parseInt(s.item.development_progress/s.item.complexity*100));return(x,t)=>(n(),c("div",{class:T(["grid auto-rows-min gap-4 md:grid-cols-4 border-b items-center hover:bg-accent",{"bg-primary/40":s.active,"cursor-not-allowed":s.item.development_progress>0,"cursor-pointer":s.item.development_progress==0}])},[o("div",J,[l(e($),null,{default:i(()=>[l(e(h),null,{default:i(()=>[l(e(b),{"as-child":""},{default:i(()=>[o("div",K,d(s.item.name),1)]),_:1}),l(e(k),null,{default:i(()=>[o("p",null,d(s.item.name),1)]),_:1})]),_:1})]),_:1})]),o("div",Q,d(e(q)(s.item.budget)),1),o("div",null,[l(e($),null,{default:i(()=>[l(e(h),null,{default:i(()=>[l(e(b),{"as-child":""},{default:i(()=>[l(N,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=m=>p.value=m)},null,8,["modelValue"])]),_:1}),l(e(k),null,{default:i(()=>[o("p",null,"Progresso: "+d(parseInt(s.item.development_progress))+" / "+d(s.item.complexity),1)]),_:1})]),_:1})]),_:1})]),o("div",null,[s.item.development_progress&&!e(u).gameEnd?(n(),c("span",Y,"in corso...")):y("",!0)])],2))}}),te={class:"flex flex-col"},oe={key:0,class:"h-25 items-center justify-between border-b p-4"},se={class:"w-full text-center"},le={class:""},ae={class:"mx-3"},ie={class:""},re={class:"mx-3"},ne={class:""},ce={class:"grid w-full grid-cols-2",style:{height:"calc(100vh - 225px)"}},de={class:"scrollbar flex h-full w-full flex-col overflow-hidden overflow-y-auto rounded-xl p-4"},ue={class:"scrollbar flex h-full w-full flex-col overflow-hidden overflow-y-auto rounded-xl p-4"},pe={key:0,class:"self-center justify-self-center text-center"},ke=j({__name:"Production",setup(g){const s=A(),u=s.props.game,p=s.props.init_game,x=s.props.developers,t=w();p&&t.setStartData(u),t.initGame();const m=D(()=>t.activeProjects.filter(v=>v.generation_completed==!0&&v.development_completed!==!0));function B(){S.visit("/api/game/project/assign",{method:"post",data:{project_id:t.activeProject.id,developer_id:t.activeDeveloper.id,date:t.dateCurrent},onSuccess:v=>{t.assignDeveloperToProject(t.activeProject,t.activeDeveloper),E.success("sail up -d....si inizia a programmare!"),t.activeProject=null,t.activeDeveloper=null},onError:v=>{E.error(v.error)}})}return(v,a)=>(n(),c(P,null,[l(e(G),{title:"Production"}),l(U,null,{default:i(()=>[o("div",te,[e(t).gameEnd?y("",!0):(n(),c("div",oe,[a[3]||(a[3]=o("p",{class:"text-muted-foreground mb-2 text-center"},"Seleziona lo sviluppatore piÃ¹ adatto per il progetto e inizia la creazione!",-1)),o("div",se,[o("span",le,d(e(t).activeDeveloper?`${e(t).activeDeveloper.name}`:"SELEZIONA UNO SVILUPPATORE"),1),o("span",ae,[l(e(M),{class:"text-primary inline h-5 w-5"})]),o("span",ie,d(e(t).activeProject?`${e(t).activeProject.name}`:"SELEZIONA UN PROGETTO"),1),o("span",re,[l(e(R),{class:"text-primary inline h-5 w-5"})]),o("span",ne,[l(I,{disabled:!e(t).activeDeveloper||!e(t).activeProject,onClick:a[0]||(a[0]=r=>B())},{default:i(()=>a[2]||(a[2]=[f("SVILUPPA PROGETTO")])),_:1},8,["disabled"])])])])),o("div",ce,[o("div",de,[(n(!0),c(P,null,C(e(x),r=>{var _;return n(),V(H,{key:r.id,item:r,active:((_=e(t).activeDeveloper)==null?void 0:_.id)===r.id,onClick:L=>e(t).activeDeveloper==null?e(t).activeDeveloper=r:e(t).activeDeveloper=null},null,8,["item","active","onClick"])}),128))]),o("div",ue,[(n(!0),c(P,null,C(m.value,r=>{var _;return n(),V(ee,{key:r.id,item:r,active:((_=e(t).activeProject)==null?void 0:_.id)===r.id,onClick:L=>e(t).activeProject==null?e(t).activeProject=r:e(t).activeProject=null},null,8,["item","active","onClick"])}),128)),m.value.length===0&&!e(t).gameEnd?(n(),c("div",pe,[a[5]||(a[5]=f(" Non ci sono progetti da sviluppare e i tuoi Developers si stanno annioiando...")),a[6]||(a[6]=o("br",null,null,-1)),a[7]||(a[7]=f(" Invia i tuoi commerciali a firmare nuovi contratti!")),a[8]||(a[8]=o("br",null,null,-1)),l(I,{class:"btn btn-primary mt-5",onClick:a[1]||(a[1]=r=>e(S).get("/game/sales"))},{default:i(()=>a[4]||(a[4]=[f(" Vedi le riunioni in corso ")])),_:1})])):y("",!0)])])])]),_:1})],64))}});export{ke as default};
